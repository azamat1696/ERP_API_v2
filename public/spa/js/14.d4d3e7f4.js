"use strict";(globalThis["webpackChunkrentacarpanel"]=globalThis["webpackChunkrentacarpanel"]||[]).push([[14],{5014:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ci});var l=i(3673),a=i(2323);const o={class:"q-pa-md"},s={class:"row"},r={class:"text-subtitle1 text-blue-8"},n={class:"text-subtitle1 text-blue-grey-8"},d=(0,l._)("br",null,null,-1),u=(0,l._)("div",null,"Rezervasyon Durumunu Yönet",-1),c={class:"row"},m={class:"col-6 q-pa-xs"},p=(0,l._)("div",{class:"text-subtitle2 text-grey-8"},"Rezervasyon Statusu",-1),f={class:"col-6 q-pa-xs"},v=(0,l._)("div",{class:"text-subtitle2 text-grey-8"},"Ödeme Durumu",-1),h={class:"row q-mt-md"},w={class:"col-12 text-right"},g=(0,l._)("div",null,"Rezervasyon Evrak Yönetimi",-1),y={class:"row bg-grey-2 q-pl-md q-pr-md"},_={class:"col-12 q-pb-xs"},b=(0,l._)("div",{class:"text-subtitle2 text-bold"},"Fatura Bilgileri",-1),F={class:"col-1 flex flex-center"},R={class:"col-4 q-pl-sm"},x=(0,l._)("div",{class:"text-subtitle1 text-left"}," Fatura",-1),D={class:"text-subtitle2 text-left text-bold flex",style:{"margin-top":"-5px"}},C={class:"col-7 text-right"},S={class:"row q-mt-sm bg-grey-2 q-pl-md q-pr-md"},k={class:"col-12 q-pb-xs"},W=(0,l._)("div",{class:"text-subtitle2 text-bold"},"Makbuz / Tahsilat Bilgileri",-1),N={class:"col-1 flex flex-center"},P={class:"col-5 q-pl-sm"},M=(0,l._)("div",{class:"text-subtitle1 text-left"}," Makbuz / Tahsilat",-1),T={class:"text-subtitle2 text-left text-bold",style:{"margin-top":"-5px"}},q={class:"col-6 text-right"},U={class:"row q-mt-sm bg-grey-2 q-pl-md q-pr-md"},z={class:"col-12 q-pb-xs"},V=(0,l._)("div",{class:"text-subtitle2 text-bold"},"Sözleşme Bilgileri",-1),O={class:"col-1 flex flex-center"},E={class:"col-5 q-pl-sm"},Z=(0,l._)("div",{class:"text-subtitle1 text-left"}," Sözleşme",-1),I={class:"text-subtitle2 text-left text-bold",style:{"margin-top":"-5px"}},H={class:"col-6 text-right"},Y=(0,l._)("div",null,"Fatura Numara Yenileme",-1),$=(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col-12"},[(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"}," Fatura Numarası ")])],-1),Q={class:"row"},A={class:"col-12"},K={class:"col-12 text-right"},B=(0,l._)("div",null,"Makbuz Numarasını Yenileme",-1),L=(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col-12"},[(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"}," Makbuz Numarası ")])],-1),G={class:"row"},j={class:"col-12"},J={class:"col-12 text-right"},X=(0,l._)("div",null,"Rezervasyon Numarasını Yenileme",-1),ee=(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col-12"},[(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"}," Rezervasyon Numarası ")])],-1),te={class:"row"},ie={class:"col-12"},le={class:"col-12 text-right"};function ae(e,t,i,ae,oe,se){const re=(0,l.up)("q-select"),ne=(0,l.up)("q-icon"),de=(0,l.up)("q-input"),ue=(0,l.up)("q-tooltip"),ce=(0,l.up)("q-btn"),me=(0,l.up)("q-td"),pe=(0,l.up)("q-chip"),fe=(0,l.up)("show-location"),ve=(0,l.up)("vehicle"),he=(0,l.up)("customer"),we=(0,l.up)("payment"),ge=(0,l.up)("q-tr"),ye=(0,l.up)("q-table"),_e=(0,l.up)("q-space"),be=(0,l.up)("q-bar"),Fe=(0,l.up)("q-form"),Re=(0,l.up)("q-card-section"),xe=(0,l.up)("q-card"),De=(0,l.up)("q-dialog"),Ce=(0,l.up)("q-separator"),Se=(0,l.up)("q-item-section"),ke=(0,l.up)("q-item"),We=(0,l.up)("q-list"),Ne=(0,l.up)("q-menu"),Pe=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(ye,{rows:se.currentReservations,columns:ae.columns,"row-key":"id",filter:ae.filter,"filter-method":se.currentReservationFilter},{"top-left":(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.Wm)(re,{label:"Kira Cinsi / Tipi",outlined:"",modelValue:ae.onFilterFields.ReservationType,"onUpdate:modelValue":[t[0]||(t[0]=e=>ae.onFilterFields.ReservationType=e),se.onFilterTable],options:this.$store.getters["MainModule/getReservationTypes"],borderless:"",dense:"","options-dense":"","emit-value":"","map-options":"","option-value":"title","option-label":"title",style:{"min-width":"170px"},class:"q-pl-xs",clearable:"",onClear:se.onFilterTable},null,8,["modelValue","options","onUpdate:modelValue","onClear"]),(0,l.Wm)(re,{label:"Rezervasyon Statusu",outlined:"",modelValue:ae.onFilterFields.ReservationStatus,"onUpdate:modelValue":[t[1]||(t[1]=e=>ae.onFilterFields.ReservationStatus=e),se.onFilterTable],options:this.$store.getters["MainModule/getReservationStatus"],borderless:"",dense:"","options-dense":"","emit-value":"","map-options":"","option-value":"code","option-label":"title",style:{"min-width":"170px"},class:"q-pl-xs",onClear:se.onFilterTable,clearable:""},null,8,["modelValue","options","onUpdate:modelValue","onClear"]),(0,l.Wm)(re,{label:"Müşteri Gurubu",outlined:"",modelValue:ae.onFilterFields.CustomerGroupName,"onUpdate:modelValue":[t[2]||(t[2]=e=>ae.onFilterFields.CustomerGroupName=e),se.onFilterTable],options:ae.customerGroupOptions,borderless:"",dense:"","options-dense":"","use-input":"","emit-value":"","map-options":"","option-value":"Name","option-label":"Name",style:{"max-width":"220px"},class:"q-pl-xs",onClear:se.onFilterTable,onFilter:ae.onCustomerGroupFilter,clearable:""},null,8,["modelValue","options","onUpdate:modelValue","onClear","onFilter"])])])),"top-right":(0,l.w5)((()=>[(0,l.Wm)(de,{outlined:"",dense:"",debounce:"500",color:"primary",modelValue:ae.filter,"onUpdate:modelValue":t[3]||(t[3]=e=>ae.filter=e),placeholder:"Araç,Müşteri,Office Arama yapınız...",style:{width:"300px!important"}},{append:(0,l.w5)((()=>[(0,l.Wm)(ne,{name:"search"})])),_:1},8,["modelValue"]),(0,l.Wm)(ce,{color:"primary",icon:"add",class:"q-mr-xs q-ml-xs q-pa-sm q-pr-md",to:{name:"createReservations"}},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Yeni Rezervasyon oluştur ")])),_:1})])),_:1}),(0,l.Wm)(ce,{color:"blue-grey-8",icon:"archive",class:"q-pa-sm",onClick:t[4]||(t[4]=e=>this.$store.dispatch("Reservations/exportCurrentReservation"))},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Excel Oluştur ")])),_:1})])),_:1}),(0,l.Wm)(ce,{color:"blue-10",label:" Eski Rezervasyonlar",icon:"history",class:"q-mr-xs q-ml-xs q-pa-sm q-pr-md",to:{name:"oldReservations"}})])),body:(0,l.w5)((e=>[((0,l.wg)(),(0,l.j4)(ge,{props:e,key:e.row.index,class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(me,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l._)("div",r,(0,a.zw)(e.row.id),1)])),_:2},1024),(0,l.Wm)(me,null,{default:(0,l.w5)((()=>[(0,l._)("div",n,"#"+(0,a.zw)(e.row.ReservationNo),1)])),_:2},1024),(0,l.Wm)(me,{class:"text-center","auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(pe,{square:"",color:se.reservationStatusColor(e.row.ReservationStatus).color,"text-color":"white",icon:se.reservationStatusColor(e.row.ReservationStatus).icon},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(se.reservationsStatus(e.row.ReservationStatus)),1)])),_:2},1032,["color","icon"])])),_:2},1024),(0,l.Wm)(me,{class:"text-center",style:{"white-space":"inherit"}},{default:(0,l.w5)((()=>[(0,l.Wm)(fe,{key:"PickupLocation",date:e.row.StartDateTime,"office-name":e.row.PickupLocation},null,8,["date","office-name"])])),_:2},1024),(0,l.Wm)(me,{style:{"white-space":"inherit"}},{default:(0,l.w5)((()=>[(0,l.Wm)(fe,{key:"DropUpLocation",date:e.row.EndDateTime,"office-name":e.row.DropLocation},null,8,["date","office-name"])])),_:2},1024),(0,l.Wm)(me,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ve,{brand:e.row.BrandName,model:e.row.ModelName,licence_plate:e.row.LicencePlate,image:e.row.Image},null,8,["brand","model","licence_plate","image"])])),_:2},1024),(0,l.Wm)(me,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{customer:e.row.CustomerNameSurname,type:e.row.CustomerType,group_name:e.row.CustomerGroupName},null,8,["customer","type","group_name"])])),_:2},1024),(0,l.Wm)(me,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(we,{total:e.row.TotalRentPrice,payment_type:e.row.PaymentMethod,currency_sembol:e.row.CurrencySymbol},null,8,["total","payment_type","currency_sembol"])])),_:2},1024),(0,l.Wm)(me,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(ce,{flat:"",round:"",color:"blue-grey-9 q-mt-xs",icon:"card_membership",onClick:t=>se.reservationUpdatePayMethodHandleBtn(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Rezervasyon Ödeme Durumunu Değiştir. ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(ce,{flat:"",round:"",color:"blue-grey-9 q-mt-xs",icon:"update",onClick:t=>se.updateAllReservation(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Rezervasyon Uzatma/Düzenleme ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(ce,{flat:"",round:"",color:"blue-grey-9",icon:"fas fa-edit",size:"sm",onClick:t=>se.reservationUpdateHandleBtn(e.row.id,e.row.ReservationStatus,e.row.PaymentState)},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Rezervasyon durumunu yönet. ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(ce,{flat:"",round:"",color:"blue-grey-9",icon:"dashboard_customize",size:"md",onClick:t=>se.invoiceManage(e.row.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Rezervasyon Evrak Yönetimi."),d,(0,l.Uk)(" Sözleşme / Fatura / Makbuz ")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns","filter","filter-method"]),(0,l.Wm)(De,{modelValue:ae.reservationManageDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>ae.reservationManageDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(xe,{style:{width:"500px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(be,{style:{height:"50px"}},{default:(0,l.w5)((()=>[u,(0,l.Wm)(_e),(0,l.wy)(((0,l.wg)(),(0,l.j4)(ce,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[Pe]])])),_:1}),(0,l.Wm)(Re,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Fe,{onSubmit:se.onsubmitReservationStatus},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",m,[p,(0,l.Wm)(re,{modelValue:ae.reservationFields.ReservationStatus,"onUpdate:modelValue":t[5]||(t[5]=e=>ae.reservationFields.ReservationStatus=e),options:se.reservationStatus,"lazy-rules":!0,rules:[e=>e&&e.length>0||"Zorunlu alan"],"emit-value":"","map-options":"","option-label":"title","option-value":"code",outlined:"",dense:""},null,8,["modelValue","options","rules"])]),(0,l._)("div",f,[v,(0,l.Wm)(re,{modelValue:ae.reservationFields.PaymentState,"onUpdate:modelValue":t[6]||(t[6]=e=>ae.reservationFields.PaymentState=e),options:se.reservationPaymentStates,"lazy-rules":!0,rules:[e=>e&&e.length>0||"Zorunlu alan"],"emit-value":"","map-options":"","option-label":"title","option-value":"code",outlined:"",dense:""},null,8,["modelValue","options","rules"])])]),(0,l._)("div",h,[(0,l._)("div",w,[(0,l.Wm)(ce,{type:"submit",color:"blue-grey-8",icon:"save",label:"Kaydet"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(De,{modelValue:ae.invoiceManageDialog,"onUpdate:modelValue":t[8]||(t[8]=e=>ae.invoiceManageDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(xe,{style:{width:"600px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(be,{style:{height:"50px"}},{default:(0,l.w5)((()=>[g,(0,l.Wm)(_e),(0,l.wy)(((0,l.wg)(),(0,l.j4)(ce,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[Pe]])])),_:1}),(0,l.Wm)(Re,null,{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l._)("div",_,[b,(0,l.Wm)(Ce,{color:"grey-5"})]),(0,l._)("div",F,[(0,l.Wm)(ne,{name:"assignment",size:"lg",color:"blue-grey-6"})]),(0,l._)("div",R,[x,(0,l._)("div",D,[(0,l.Uk)(" **** "),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.InvoiceNo,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e}," - "+(0,a.zw)(e),1)))),128))])]),(0,l._)("div",C,[(0,l.Wm)(ce,{icon:"published_with_changes",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.InvoiceNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:i=>se.editInvoiceNumber(ae.invoiceManageFields.InvoiceID[t],e)},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura No Gönder "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Fatura Numarasını Yenile ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"mark_email_read",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.InvoiceNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/sendReservationInvoiceToMail",ae.invoiceManageFields.InvoiceID[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura No Gönder "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Müşteriye Mail Gönder ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"cloud_download",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.InvoiceNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/downloadInvoice",ae.invoiceManageFields.InvoiceID[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura No İndir "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Fatura İndir ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"print",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.InvoiceNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/printInvoice",ae.invoiceManageFields.InvoiceID[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura Numarası "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Fatura Yazdır ")])),_:1})])),_:1})])]),(0,l._)("div",S,[(0,l._)("div",k,[W,(0,l.Wm)(Ce,{color:"grey-5"})]),(0,l._)("div",N,[(0,l.Wm)(ne,{name:"description",size:"lg",color:"blue-grey-6"})]),(0,l._)("div",P,[M,(0,l._)("div",T,[(0,l.Uk)(" **** "),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReceiptCollectionNo,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e},(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":" - "+e),1)))),128))])]),(0,l._)("div",q,[(0,l.Wm)(ce,{icon:"published_with_changes",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReceiptCollectionNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:i=>se.editReceiptNumber(ae.invoiceManageFields.ReceiptID[t],e)},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura No Gönder "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Makbuz Numarasını Yenile ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"mark_email_read",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReceiptCollectionNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/sendReservationReceiptToMail",ae.invoiceManageFields.ReceiptID[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura No Gönder "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Müşteriye Mail Gönder ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"cloud_download",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReceiptCollectionNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/downloadReceipt",ae.invoiceManageFields.ReceiptID[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura No İndir "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Makbuz / Tahsilat PDF İndir ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"print",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReceiptCollectionNo,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/printReceipt",ae.invoiceManageFields.ReceiptID[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Fatura Numarası "+(0,a.zw)(+e===+ae.invoiceManageFields.reservationId?"Özel":e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Makbuz / Tahsilat Yazdır ")])),_:1})])),_:1})])]),(0,l._)("div",U,[(0,l._)("div",z,[V,(0,l.Wm)(Ce,{color:"grey-5"})]),(0,l._)("div",O,[(0,l.Wm)(ne,{name:"receipt_long",size:"lg",color:"blue-grey-6"})]),(0,l._)("div",E,[Z,(0,l._)("div",I," **** - "+(0,a.zw)(ae.invoiceManageFields.ReservationNo),1)]),(0,l._)("div",H,[(0,l.Wm)(ce,{icon:"published_with_changes",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReservationNoOfArray,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>se.editReservationNumber(ae.invoiceManageFields.ReservationIdOfArray[t],ae.invoiceManageFields.ReservationNoOfArray[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Rezervasyon Numarası: "+(0,a.zw)(e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Sözleşme Numarasını Yenile ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"mark_email_read",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReservationNoOfArray,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/sendReservationAgreementToMail",ae.invoiceManageFields.ReservationIdOfArray[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Rezervasyon Numarası: "+(0,a.zw)(ae.invoiceManageFields.ReservationNoOfArray[t]),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Müşteriye Mail Gönder ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"cloud_download",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReservationNoOfArray,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/getReservationAgreement",ae.invoiceManageFields.ReservationIdOfArray[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Rezervasyon Numarası: "+(0,a.zw)(ae.invoiceManageFields.ReservationNoOfArray[t]),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Sözleşme PDF İndir ")])),_:1})])),_:1}),(0,l.Wm)(ce,{icon:"print",color:"blue-grey-8",fab:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(We,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.invoiceManageFields.ReservationNoOfArray,((e,t)=>((0,l.wg)(),(0,l.j4)(ke,{key:e,clickable:"",onClick:e=>this.$store.dispatch("Reservations/printAgreement",ae.invoiceManageFields.ReservationIdOfArray[t])},{default:(0,l.w5)((()=>[(0,l.Wm)(Se,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Rezervasyon Numarası: "+(0,a.zw)(ae.invoiceManageFields.ReservationNoOfArray[t]),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(ue,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Sözleşme Yazdır ")])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(De,{modelValue:ae.updateInvoiceNumberDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>ae.updateInvoiceNumberDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(xe,{style:{width:"450px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(be,{style:{height:"50px"}},{default:(0,l.w5)((()=>[Y,(0,l.Wm)(_e),(0,l.wy)(((0,l.wg)(),(0,l.j4)(ce,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[Pe]])])),_:1}),(0,l.Wm)(Re,null,{default:(0,l.w5)((()=>[$,(0,l._)("div",Q,[(0,l.Wm)(Fe,{onSubmit:se.onUpdateInvoice,class:"col-12"},{default:(0,l.w5)((()=>[(0,l._)("div",A,[(0,l.Wm)(de,{"lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],dense:"",outlined:"",modelValue:ae.invoiceNumberEditFields.InvoiceNo,"onUpdate:modelValue":t[9]||(t[9]=e=>ae.invoiceNumberEditFields.InvoiceNo=e)},null,8,["rules","modelValue"])]),(0,l._)("div",K,[(0,l.Wm)(ce,{type:"submit",color:"blue-grey-8",icon:"update",label:"Güncelle"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(De,{modelValue:ae.updateReceiptNumberDialog,"onUpdate:modelValue":t[12]||(t[12]=e=>ae.updateReceiptNumberDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(xe,{style:{width:"450px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(be,{style:{height:"50px"}},{default:(0,l.w5)((()=>[B,(0,l.Wm)(_e),(0,l.wy)(((0,l.wg)(),(0,l.j4)(ce,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[Pe]])])),_:1}),(0,l.Wm)(Re,null,{default:(0,l.w5)((()=>[L,(0,l._)("div",G,[(0,l.Wm)(Fe,{onSubmit:se.onUpdateReceipt,class:"col-12"},{default:(0,l.w5)((()=>[(0,l._)("div",j,[(0,l.Wm)(de,{"lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],dense:"",outlined:"",modelValue:ae.receiptNumberEditFields.ReceiptCollectionNo,"onUpdate:modelValue":t[11]||(t[11]=e=>ae.receiptNumberEditFields.ReceiptCollectionNo=e)},null,8,["rules","modelValue"])]),(0,l._)("div",J,[(0,l.Wm)(ce,{type:"submit",color:"blue-grey-8",icon:"update",label:"Güncelle"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(De,{modelValue:ae.updateReservationNumberDialog,"onUpdate:modelValue":t[14]||(t[14]=e=>ae.updateReservationNumberDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(xe,{style:{width:"450px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(be,{style:{height:"50px"}},{default:(0,l.w5)((()=>[X,(0,l.Wm)(_e),(0,l.wy)(((0,l.wg)(),(0,l.j4)(ce,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[Pe]])])),_:1}),(0,l.Wm)(Re,null,{default:(0,l.w5)((()=>[ee,(0,l._)("div",te,[(0,l.Wm)(Fe,{onSubmit:se.onUpdateReservationNumber,class:"col-12"},{default:(0,l.w5)((()=>[(0,l._)("div",ie,[(0,l.Wm)(de,{"lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],dense:"",outlined:"",modelValue:ae.reservationNumberEditFields.ReservationNo,"onUpdate:modelValue":t[13]||(t[13]=e=>ae.reservationNumberEditFields.ReservationNo=e)},null,8,["rules","modelValue"])]),(0,l._)("div",le,[(0,l.Wm)(ce,{type:"submit",color:"blue-grey-8",icon:"update",label:"Güncelle"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}i(5663),i(5363),i(71);var oe=i(261),se=i(5081),re=i(6427),ne=i(6597),de=i(1959),ue=i(8880);const ce=(0,l._)("div",null,"Rezervasyon Ödeme Durumunu Yenile",-1),me={class:"col-12 q-pa-sm"},pe=(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Ödeme Yöntemi ",-1),fe={class:"col-12 row"},ve={class:"col-12 q-pa-sm"},he=(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Belge Numarası ",-1),we={class:"col-12 q-pa-sm"},ge=(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Ödeme Durumu ",-1);function ye(e,t,i,a,o,s){const r=(0,l.up)("q-space"),n=(0,l.up)("q-tooltip"),d=(0,l.up)("q-btn"),u=(0,l.up)("q-bar"),c=(0,l.up)("q-icon"),m=(0,l.up)("q-select"),p=(0,l.up)("q-input"),f=(0,l.up)("q-card-section"),v=(0,l.up)("q-card-actions"),h=(0,l.up)("q-card"),w=(0,l.up)("q-dialog"),g=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(w,{ref:"dialog",persistent:!0,onHide:s.hide},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"q-dialog-plugin",style:{width:"500px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{style:{height:"50px"}},{default:(0,l.w5)((()=>[ce,(0,l.Wm)(r),(0,l.wy)(((0,l.wg)(),(0,l.j4)(d,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[g]])])),_:1}),(0,l.Wm)(f,{class:"q-pa-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",me,[pe,(0,l.Wm)(m,{modelValue:a.formFields.PaymentMethod,"onUpdate:modelValue":[t[1]||(t[1]=e=>a.formFields.PaymentMethod=e),s.onSelectedPaymentMethod],options:this.$store.getters["MainModule/getReservationPaymentMethods"].filter((e=>"CreditCartOnOffice"!==e.code)),outlined:"",dense:"","option-label":e=>e.title,"option-value":"code","emit-value":"","map-options":"","use-input":"","lazy-rules":!0,rules:[e=>e&&e.length>0||"Zorunlu alan"],"hide-bottom-space":""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"account_balance_wallet",onClick:t[0]||(t[0]=(0,ue.iM)((()=>{}),["stop"]))})])),_:1},8,["modelValue","options","option-label","rules","onUpdate:modelValue"])]),(0,l.wy)((0,l._)("div",fe,[(0,l._)("div",ve,[he,(0,l.Wm)(p,{modelValue:a.formFields.PayReceiptNo,"onUpdate:modelValue":t[2]||(t[2]=e=>a.formFields.PayReceiptNo=e),dense:"",outlined:"","lazy-rules":!1,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":"",disable:!a.showPayReceiptNo},null,8,["modelValue","rules","disable"])])],512),[[ue.F8,a.showPayReceiptNo]]),(0,l._)("div",we,[ge,(0,l.Wm)(m,{modelValue:a.formFields.PaymentState,"onUpdate:modelValue":t[4]||(t[4]=e=>a.formFields.PaymentState=e),options:this.$store.getters["MainModule/getReservationTransactionStates"],outlined:"",dense:"","option-label":e=>e.title,"option-value":"code","emit-value":"","map-options":"","use-input":"","lazy-rules":!0,rules:[e=>e&&e.length>0||"Zorunlu alan"],"hide-bottom-space":""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"account_balance",onClick:t[3]||(t[3]=(0,ue.iM)((()=>{}),["stop"]))})])),_:1},8,["modelValue","options","option-label","rules"])])])),_:1}),(0,l.Wm)(v,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{color:"blue-grey-8",icon:"save",label:"Güncelle",onClick:s.onOKClick},null,8,["onClick"]),(0,l.Wm)(d,{color:"primary",label:"İptal Et",onClick:s.onCancelClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}const _e={props:["reservation"],setup(){return{formFields:(0,de.iH)({PaymentMethod:"",PayReceiptNo:"",PaymentState:""}),showPayReceiptNo:(0,de.iH)(!1)}},emits:["ok","hide","dismiss"],methods:{show(){this.$refs.dialog.show(),this.formFields.PaymentState=this.reservation.PaymentState,this.formFields.PaymentMethod=this.reservation.PaymentMethod,this.formFields.PayReceiptNo=this.reservation.PayReceiptNo,"EftTransfer"!==this.formFields.PaymentMethod&&"CurrentSales"!==this.formFields.PaymentMethod&&"CreditCartOnTerminal"!==this.formFields.PaymentMethod||(this.showPayReceiptNo=!0)},onOKClick(){let e=new FormData;for(const[t,i]of Object.entries(this.formFields))e.append(t,i);e.append("id",this.reservation.id),this.$store.dispatch("Reservations/renewReservationPaymentMethod",e).then((e=>{if(!0!==e)return!1;this.$emit("cancel"),this.hide()}))},hide(){this.$refs.dialog.hide(),this.$emit("dismiss")},onCancelClick(){this.hide()},onSelectedPaymentMethod(e){this.formFields.PayReceiptNo="",this.showPayReceiptNo="EftTransfer"===e||"CurrentSales"===e||"CreditCartOnTerminal"===e}}};var be=i(4260),Fe=i(4390),Re=i(151),xe=i(846),De=i(2025),Ce=i(2165),Se=i(8870),ke=i(5589),We=i(3314),Ne=i(4554),Pe=i(4689),Me=i(9367),Te=i(677),qe=i(7518),Ue=i.n(qe);const ze=(0,be.Z)(_e,[["render",ye]]),Ve=ze;Ue()(_e,"components",{QDialog:Fe.Z,QCard:Re.Z,QBar:xe.Z,QSpace:De.Z,QBtn:Ce.Z,QTooltip:Se.Z,QCardSection:ke.Z,QSelect:We.Z,QIcon:Ne.Z,QInput:Pe.Z,QCardActions:Me.Z}),Ue()(_e,"directives",{ClosePopup:Te.Z});const Oe=(0,l._)("div",null,"Rezervasyon Güncelle",-1),Ee={class:"row"},Ze={class:"col-3 q-pa-sm"},Ie=(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"}," Teslim Alma Yeri ",-1),He={class:"col-3 q-pa-sm"},Ye=(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"}," Teslim Edilecek Yer ",-1),$e={class:"col-3 q-pa-sm"},Qe=(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"},"Teslim Alınacak Tarih ",-1),Ae={class:"row items-center justify-end"},Ke={class:"row items-center justify-end"},Be={class:"col-3 q-pa-sm"},Le=(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"},"Teslim Edilecek Tarih ",-1),Ge={class:"row items-center justify-end"},je={class:"row items-center justify-end"},Je={class:"col-6 q-pa-sm"},Xe=(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Rezervasyon Yetkili Kişi ",-1),et={class:"col-6 q-pa-sm"},tt=(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Kullanacak Kişiler ",-1),it={class:"col-4 q-pa-sm"},lt=(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Ödeme Yöntemi ",-1),at={class:"col-2 q-pa-sm"},ot=(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"}," Günlük Ücret",-1),st={class:"col-2 q-pa-sm"},rt=(0,l._)("div",{class:"text-subtitle2 text-bold text-grey-8"},"Toplam Ücreti",-1),nt={class:"col-4 q-pa-sm"},dt=(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Belge Numarası ",-1),ut={class:"row"},ct={class:"col-6 q-pa-sm"},mt={class:"col-6 q-pa-sm"},pt={class:"col-12 q-pa-md bg-blue-2 q-pa-sm",style:{"border-radius":"3%"}},ft={class:"text-subtitle2"},vt={class:"col-12 q-pa-md bg-green-2 q-pa-sm q-mt-sm",style:{"border-radius":"3%"}},ht={class:"text-subtitle2"},wt={class:"row q-mt-sm"},gt={class:"col-12 q-pa-sm"},yt={class:"text-subtitle2 text-bold text-grey-9"},_t={class:"float-right"},bt={class:"text-subtitle2 text-bold text-grey-9"},Ft={class:"float-right"},Rt={class:"text-subtitle2 text-bold text-grey-9"},xt={class:"float-right"},Dt={class:"text-subtitle2 text-grey-9"},Ct={class:"float-right"},St={class:"q-ml-xs q-mr-xs"},kt={class:"col-12 q-pa-sm"},Wt={class:"text-h6 text-bold text-blue-grey-8"},Nt={class:"float-right"},Pt={class:"text-h6 text-bold text-blue-grey-8"},Mt={class:"float-right"},Tt={class:"text-subtitle1 text-bold text-green-8"},qt={class:"q-ml-md"},Ut=(0,l._)("div",{class:"text-h4"},"Yeni Müşteri Kaydı ",-1);function zt(e,t,i,o,s,r){const n=(0,l.up)("q-space"),d=(0,l.up)("q-tooltip"),u=(0,l.up)("q-btn"),c=(0,l.up)("q-bar"),m=(0,l.up)("q-icon"),p=(0,l.up)("q-select"),f=(0,l.up)("q-date"),v=(0,l.up)("q-popup-proxy"),h=(0,l.up)("q-time"),w=(0,l.up)("q-input"),g=(0,l.up)("q-checkbox"),y=(0,l.up)("q-td"),_=(0,l.up)("q-tr"),b=(0,l.up)("q-table"),F=(0,l.up)("q-card-section"),R=(0,l.up)("q-card"),x=(0,l.up)("q-expansion-item"),D=(0,l.up)("q-form"),C=(0,l.up)("q-card-actions"),S=(0,l.up)("q-dialog"),k=(0,l.up)("new-customer-form"),W=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(S,{ref:"dialog",onHide:r.onDialogHide,persistent:!0,"full-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"q-dialog-plugin",style:{width:"1200px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{style:{height:"50px"},class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[Oe,(0,l.Wm)(n),(0,l.wy)(((0,l.wg)(),(0,l.j4)(u,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[W]])])),_:1}),(0,l.Wm)(F,{class:"q-pa-none q-pl-sm q-pr-sm q-pt-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{onSubmit:r.onSubmitUpdatedReservation},{default:(0,l.w5)((()=>[(0,l._)("div",Ee,[(0,l._)("div",Ze,[Ie,(0,l.Wm)(p,{modelValue:o.formFields.pickup_office_id,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formFields.pickup_office_id=e),options:this.$store.getters["OfficeModule/getRecords"],outlined:"",dense:"","option-label":e=>e.OfficeName,"option-value":"id","emit-value":"","map-options":"","use-input":"","lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":"","menu-anchor":"bottom start"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"o_location_on",onClick:t[0]||(t[0]=(0,ue.iM)((()=>{}),["stop"]))})])),_:1},8,["modelValue","options","option-label","rules"])]),(0,l._)("div",He,[Ye,(0,l.Wm)(p,{modelValue:o.formFields.drop_office_id,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formFields.drop_office_id=e),options:this.$store.getters["OfficeModule/getRecords"],outlined:"",dense:"","option-label":e=>e.OfficeName,"option-value":"id","emit-value":"","map-options":"","use-input":"","lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":"","menu-anchor":"bottom start"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"o_location_on",onClick:t[2]||(t[2]=(0,ue.iM)((()=>{}),["stop"]))})])),_:1},8,["modelValue","options","option-label","rules"])]),(0,l._)("div",$e,[Qe,(0,l.Wm)(w,{dense:"",square:"",outlined:"",modelValue:o.formFields.StartDateTime,"onUpdate:modelValue":t[6]||(t[6]=e=>o.formFields.StartDateTime=e),"lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":"",disable:""},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"event",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{calendar:"gregorian",modelValue:o.formFields.StartDateTime,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formFields.StartDateTime=e),"model-value":o.formFields.StartDateTime,options:r.checkMinDate,mask:"YYYY-MM-DD HH:mm",minimal:"",locale:this.$store.getters["MainModule/getDateTimeLocale"]},{default:(0,l.w5)((()=>[(0,l._)("div",Ae,[(0,l.wy)((0,l.Wm)(u,{label:"Kapat",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["modelValue","model-value","options","locale"])])),_:1})])),_:1})])),after:(0,l.w5)((()=>[(0,l.Wm)(u,{icon:"access_time",class:"full-height",outline:"",color:"grey-6"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:o.formFields.StartDateTime,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formFields.StartDateTime=e),mask:"YYYY-MM-DD HH:mm",format24h:"",disable:""},{default:(0,l.w5)((()=>[(0,l._)("div",Ke,[(0,l.wy)((0,l.Wm)(u,{label:"Kapat",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])]),(0,l._)("div",Be,[Le,(0,l.Wm)(w,{dense:"",square:"",outlined:"",modelValue:o.formFields.EndDateTime,"onUpdate:modelValue":t[9]||(t[9]=e=>o.formFields.EndDateTime=e),"lazy-rules":!0,option:r.checkMinEndDate,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":""},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"event",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:o.formFields.EndDateTime,"onUpdate:modelValue":[t[7]||(t[7]=e=>o.formFields.EndDateTime=e),r.onChangeEndDateTime],mask:"YYYY-MM-DD HH:mm",options:r.checkMinEndDate,minimal:"",locale:this.$store.getters["MainModule/getDateTimeLocale"]},{default:(0,l.w5)((()=>[(0,l._)("div",Ge,[(0,l.wy)((0,l.Wm)(u,{label:"Kapat",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["modelValue","options","locale","onUpdate:modelValue"])])),_:1})])),_:1})])),after:(0,l.w5)((()=>[(0,l.Wm)(u,{icon:"access_time",class:"full-height",outline:"",color:"grey-6"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{"onUpdate:modelValue":[r.onChangeEndTime,t[8]||(t[8]=e=>o.formFields.EndDateTime=e)],modelValue:o.formFields.EndDateTime,mask:"YYYY-MM-DD HH:mm",format24h:""},{default:(0,l.w5)((()=>[(0,l._)("div",je,[(0,l.wy)((0,l.Wm)(u,{label:"Kapat",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["onUpdate:modelValue","modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","option","rules"])]),(0,l._)("div",Je,[Xe,(0,l.Wm)(p,{modelValue:o.formFields.customers_id,"onUpdate:modelValue":t[11]||(t[11]=e=>o.formFields.customers_id=e),options:o.customerOptions,outlined:"",dense:"","option-label":e=>0!==e.length?e.Name+" "+e.Surname:e.Name,"option-value":"id","emit-value":"","map-options":"","use-input":"","lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],onFilter:o.onFilterCustomers,"hide-bottom-space":"","menu-anchor":"bottom start",clearable:""},{after:(0,l.w5)((()=>[(0,l.Wm)(u,{icon:"add",class:"full-height",outline:"",color:"grey-6",onClick:t[10]||(t[10]=e=>o.newFormDialog=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Yeni Müşteri Kaydı Oluştur. ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","option-label","rules","onFilter"])]),(0,l.wy)((0,l._)("div",et,[tt,(0,l.Wm)(p,{modelValue:o.formFields.reservation_drivers,"onUpdate:modelValue":t[13]||(t[13]=e=>o.formFields.reservation_drivers=e),options:o.customerDriversOptionsByType,outlined:"",dense:"","option-label":e=>0!==e.length?e.Name+" "+e.Surname:e.Name,"option-value":"id","emit-value":"","map-options":"","input-debounce":"0","use-input":"","hide-bottom-space":"",onFilter:o.onFilterCustomerOfficialDrivers,clearable:"",multiple:"","use-chips":"","menu-anchor":"bottom start"},{after:(0,l.w5)((()=>[(0,l.Wm)(u,{icon:"add",class:"full-height",outline:"",color:"grey-6",onClick:t[12]||(t[12]=e=>o.newFormDialog=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Yeni Kullanıcı Kaydı Oluştur. ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","option-label","onFilter"])],512),[[ue.F8,!o.showCustomerDrivers]]),(0,l._)("div",it,[lt,(0,l.Wm)(p,{modelValue:o.formFields.PaymentMethod,"onUpdate:modelValue":[t[15]||(t[15]=e=>o.formFields.PaymentMethod=e),r.onSelectedPaymentMethod],options:this.$store.getters["MainModule/getReservationPaymentMethods"].filter((e=>"CreditCartOnOffice"!==e.code)),outlined:"",dense:"","option-label":e=>e.title,"option-value":"code","emit-value":"","map-options":"","use-input":"","lazy-rules":!0,rules:[e=>e&&e.length>0||"Zorunlu alan"],"hide-bottom-space":""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"account_balance_wallet",onClick:t[14]||(t[14]=(0,ue.iM)((()=>{}),["stop"]))})])),_:1},8,["modelValue","options","option-label","rules","onUpdate:modelValue"])]),(0,l.wy)((0,l._)("div",at,[ot,(0,l.Wm)(w,{dense:"",outlined:"",modelValue:o.formFields.DailyRentPrice,"onUpdate:modelValue":t[16]||(t[16]=e=>o.formFields.DailyRentPrice=e),"lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":"",mask:"#.##","fill-mask":"0","reverse-fill-mask":"",readonly:""},{append:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(o.oldReservation.CurrencySymbol),1)])),_:1},8,["modelValue","rules"])],512),[[ue.F8,o.formFields.EndDateTime.toString().length>0]]),(0,l.wy)((0,l._)("div",st,[rt,(0,l.Wm)(w,{dense:"",outlined:"",modelValue:o.formFields.TotalRentPrice,"onUpdate:modelValue":t[17]||(t[17]=e=>o.formFields.TotalRentPrice=e),"lazy-rules":!0,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":"",mask:"#.##","fill-mask":"0","reverse-fill-mask":"",readonly:""},{append:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(o.oldReservation.CurrencySymbol),1)])),_:1},8,["modelValue","rules"])],512),[[ue.F8,o.formFields.EndDateTime.toString().length>0]]),(0,l.wy)((0,l._)("div",nt,[dt,(0,l.Wm)(w,{modelValue:o.formFields.PayReceiptNo,"onUpdate:modelValue":t[18]||(t[18]=e=>o.formFields.PayReceiptNo=e),dense:"",outlined:"","lazy-rules":!1,rules:[e=>e&&e.toString().length>0||"Zorunlu alan"],"hide-bottom-space":"",disable:!o.showPayReceiptNo},null,8,["modelValue","rules","disable"])],512),[[ue.F8,o.showPayReceiptNo]])]),(0,l._)("div",ut,[(0,l._)("div",ct,[(0,l.Wm)(x,{group:"somegroups",label:"Ekstra Hizmetler","default-opened":"",class:"overflow-hidden",style:{"border-radius":"5px"},"header-class":"text-primary bg-grey-2 text-subtitle2 "},{default:(0,l.w5)((()=>[(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{dense:"",rows:r.extraServicesRow,columns:o.CarExtrasReservationColumns,"row-key":"id",selection:"multiple",class:"no-box-shadow q-pa-none","onUpdate:selected":[r.onSelectedExtraServices,t[19]||(t[19]=e=>o.extraServicesSelected=e)],selected:o.extraServicesSelected,"hide-bottom":"","hide-header":""},{body:(0,l.w5)((e=>[((0,l.wg)(),(0,l.j4)(_,{props:e,key:e.row.index,class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{disable:r.checkSelectedExtraServices(e.row.id),modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,color:"teal"},null,8,["disable","modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.row.Name),1)])),_:2},1024),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.row.Price?e.row.Price+" TL":""),1)])),_:2},1024),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)("null"!==e.row.Description?e.row.Description:""),1)])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns","onUpdate:selected","selected"])])),_:1})])),_:1})])),_:1})]),(0,l._)("div",mt,[(0,l._)("div",pt,[(0,l._)("div",ft,[(0,l.Wm)(m,{name:"account_balance",size:"sm"}),(0,l.Uk)(" "+(0,a.zw)(o.formFields.RentDays)+" Günlük ",1),(0,l._)("b",null,(0,a.zw)(o.formFields.CurrencySymbol),1),(0,l.Uk)(" döviz kuru : 1 "),(0,l._)("b",null,(0,a.zw)(o.formFields.CurrencySymbol),1),(0,l.Uk)(" = "+(0,a.zw)(parseFloat(o.formFields.CurrencyRate).toFixed(2))+" (TL) ",1)])]),(0,l._)("div",vt,[(0,l._)("div",ht,[(0,l.Wm)(m,{name:"o_info",size:"sm"}),(0,l.Uk)(" Aracın TL bazındeki günlük ücreti: "+(0,a.zw)(parseFloat(o.formFields.RealDailyRentPrice).toFixed(2))+" (TL) ",1)])]),(0,l._)("div",wt,[(0,l._)("div",gt,[(0,l._)("div",yt,[(0,l.Uk)("Kira Gün Toplamı: "),(0,l._)("span",_t,(0,a.zw)(this.formFields.newRentDays>0?this.formFields.newRentDays:this.formFields.RentDays)+" Gün",1)]),(0,l._)("div",bt,[(0,l.Uk)("Günlük Ücreti: "),(0,l._)("span",Ft,(0,a.zw)(parseFloat(o.formFields.DailyRentPrice).toFixed(2))+" "+(0,a.zw)(o.formFields.CurrencySymbol),1)]),(0,l._)("div",Rt,[(0,l.Uk)("Toplam Araç Kiralama Ücreti: "),(0,l._)("span",xt,(0,a.zw)(o.formFields.TotalRentPrice)+" "+(0,a.zw)(o.formFields.CurrencySymbol),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.formFields.ExtraServices,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"q-pa-none",key:t},[(0,l._)("div",Dt,[(0,l.Uk)((0,a.zw)(e.Name)+": "+(0,a.zw)("DependsOnHalfPrice"===e.CalculateType?"("+o.formFields.RentDays+" Gün)":""),1),(0,l._)("span",Ct,[(0,l.Uk)((0,a.zw)(e.Price)+" ",1),(0,l._)("span",St,(0,a.zw)(o.formFields.CurrencySymbol),1)])])])))),128))]),(0,l._)("div",kt,[(0,l._)("div",Wt,[(0,l.Uk)("Önceki Toplam Tutar: "),(0,l._)("div",Nt,[(0,l._)("span",{class:(0,a.C_)([o.formFields.ExtendedDate?"q-ml-md text-strike text-grey-5 ":"q-ml-md "])},(0,a.zw)(parseFloat(i.reservation.TotalPrice).toFixed(2))+" "+(0,a.zw)(i.reservation.CurrencySymbol),3),(0,l.wy)((0,l._)("span",{class:"q-ml-sm"},(0,a.zw)(parseFloat(o.formFields.TotalPrice).toFixed(2))+" "+(0,a.zw)(o.formFields.CurrencySymbol),513),[[ue.F8,o.formFields.ExtendedDate]])])]),(0,l._)("div",Pt,[(0,l.Uk)("Toplam Ödenecek Tutar: "),(0,l._)("span",Mt,(0,a.zw)(o.formFields.newTotalPrice)+" "+(0,a.zw)(o.formFields.CurrencySymbol),1)]),(0,l.wy)((0,l._)("div",Tt,[(0,l.Uk)("Alınacak TL Tutarı: "),(0,l._)("span",qt,(0,a.zw)(parseFloat(o.formFields.TotalPriceByCurrency).toFixed(2))+" TL",1)],512),[[ue.F8,"₺"!==o.formFields.CurrencySymbol]])])])])])])),_:1},8,["onSubmit"])])),_:1}),(0,l.Wm)(C,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{color:"blue-grey-9",label:"Kaydet",onClick:r.onOKClick},null,8,["onClick"]),(0,l.Wm)(u,{color:"primary",label:"İptal Et",onClick:r.onCancelClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"]),(0,l.Wm)(S,{modelValue:o.newFormDialog,"onUpdate:modelValue":t[20]||(t[20]=e=>o.newFormDialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{style:{"min-width":"1000px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{style:{height:"50px"},class:"q-pa-md bg-blue-grey-8 text-white"},{default:(0,l.w5)((()=>[Ut,(0,l.Wm)(n),(0,l.wy)(((0,l.wg)(),(0,l.j4)(u,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[W]])])),_:1}),(0,l.Wm)(k,{onCloseCustomerDialog:r.addedNewCustomer},null,8,["onCloseCustomerDialog"])])),_:1})])),_:1},8,["modelValue"])],64)}i(7768);var Vt=i(741),Ot=i(5616),Et=i(906);const Zt=[{name:"Name",align:"center",label:"Hizmet Adı",field:"Name",sortable:!0},{name:"Price",align:"center",label:"Ücreti",field:"Price",sortable:!1},{name:"Description",align:"center",label:"Hizmet Açıklaması",field:"Description",sortable:!1}],It=()=>{let e=Ot.ZP.subtractFromDate(new Date,{days:1}),t=Ot.ZP.addToDate(e,{days:1}),i=1===(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1):e.getMonth()+1,l=1===e.getDate().toString().length?"0"+e.getDate():e.getDate(),a=e.getHours(),o=e.getMinutes(),s=e.getFullYear(),r=1===(t.getMonth()+1).toString().length?"0"+(t.getMonth()+1):t.getMonth()+1,n=1===t.getDate().toString().length?"0"+t.getDate():t.getDate();return{startDateTime:t.getFullYear()+"-"+r+"-"+n+" "+t.getHours()+":"+t.getMinutes(),currentTime:s+"-"+i+"-"+l+" "+a+":"+o,currentMonth:i,currentDay:l,currentHours:a,currentMin:o,currentYear:s}},Ht={props:{reservation:{require:!0,type:Object}},components:{NewCustomerForm:Et.Z},setup(){const e=(0,Vt.oR)(),t=(0,l.Fl)((()=>JSON.parse(JSON.stringify(e.getters["CustomersModule/getRecords"])))),i=(0,de.iH)(t.value),a=(0,l.Fl)((()=>JSON.parse(JSON.stringify(e.getters["CustomerGroupsModule/getRecords"])))),o=(0,de.iH)(a.value),s=(0,l.Fl)((()=>JSON.parse(JSON.stringify(e.getters["CustomersModule/getRecordByCustomerType"])))),r=(0,de.iH)(s.value),n=(0,de.iH)([]),d=(0,de.iH)([]),u=(0,de.iH)([]);return{customerDrivers:n,customerDriverOptions:d,customers:t,customerOptions:i,customerGroupOptions:o,customerGroups:a,date:Ot.ZP,CarExtrasReservationColumns:Zt,extraServicesSelected:u,customersByTypes:s,customerDriversOptionsByType:r,groupDialogCreate:(0,de.iH)(!1),newFormDialog:(0,de.iH)(!1),showCustomerDrivers:(0,de.iH)(!1),addNewDriversDialog:(0,de.iH)(!1),showPayReceiptNo:(0,de.iH)(!1),oldReservation:(0,de.iH)({}),invoiceChecked:(0,de.iH)(!1),formFields:(0,de.iH)({reservation_id:"",ReservationNo:"",StartDateTime:"",EndDateTime:"",RentDays:0,DailyRentPrice:"",reservation_drivers:[],CurrencyRate:"",RealDailyRentPrice:0,CurrencySymbol:"",TotalRentPrice:"",TotalPrice:0,TotalPriceByCurrency:0,customer_groups_id:"",ReservationRentType:"Corporate",PayReceiptNo:"",PaymentMethod:"",pickup_office_id:"",drop_office_id:"",TransactionNo:"",customers_id:"",cars_id:"",SelectedPriceTitle:"",OrgDailyRentPrice:0,ExtraServices:[],TotalExtraServicesPrice:0,ReservationType:"",CurrencyType:"",PaymentState:"",ReservationRemarks:"",ExtendedDate:!1,newTotalPrice:0,newRentDays:0,newTotalExtraServicesPrice:0,newTotalPriceByCurrency:0,newTotalRentPrice:0}),renewReservationDateFields:(0,de.iH)({minMonthYear:"",maxMonthYear:""}),renewReservationDateRanges:(0,de.iH)({from:"2020/07/08",to:"2020/07/17"}),onFilterCustomers(e,l,a){l((()=>{const l=e.toLowerCase();i.value=t.value.filter((e=>e.Name.toLowerCase().indexOf(l)>-1))}))},onFilterCustomerDrivers(e,t,i){t((()=>{const t=e.toLowerCase();d.value=n.value.filter((e=>e.DriverName.toLowerCase().indexOf(t)>-1))}))},onFilterCustomerOfficialDrivers(e,t,i){t((()=>{const t=e.toLowerCase();r.value=s.value.filter((e=>e.Name.toLowerCase().indexOf(t)>-1))}))}}},emits:["ok","hide"],methods:{checkMinDate(e){return e>=It().currentYear+"/"+It().currentMonth+"/"+It().currentDay},checkMinEndDate(e){const t=this.reservation.EndDateTime.split(" ")[0].replaceAll("-","/");return e>=t},onChangeEndDateTime(){this.setDiffDay()},setDiffDay(){let e=new Date(this.reservation.StartDateTime.replaceAll("-","/")),t=new Date(this.formFields.EndDateTime.replaceAll("-","/"));e=new Date(e.setHours(e.getHours()+3));const i=Math.abs(t-e),l=Math.ceil(i/864e5);let a=new Date(e.setDate(e.getDate()+l));t.getTime()>a.getTime()?this.formFields.RentDays=l+1:this.formFields.RentDays=l,this.formFields.RentDays>this.reservation.RentDays?(this.formFields.ExtendedDate=!0,this.formFields.StartDateTime=this.reservation.EndDateTime,this.formFields.TotalRentPrice=0,this.formFields.TotalRentPrice=(+this.formFields.RentDays*+this.formFields.DailyRentPrice).toFixed(2),this.onSelectedExtraServices(this.formFields.ExtraServices),this.setTotalPriceOrder()):(this.formFields.TotalRentPrice=0,this.formFields.TotalRentPrice=(+this.formFields.RentDays*+this.formFields.DailyRentPrice).toFixed(2),this.onSelectedExtraServices(this.formFields.ExtraServices),this.setTotalPriceOrder())},onChangeEndTime(e,t){this.setDiffDay()},checkSelectedExtraServices(e){let t=JSON.parse(this.reservation.ExtraServices).find((t=>+t.id===+e));return!!t},show(){this.onSelectedCustomer(+this.reservation.customer_id),this.onSelectedPaymentMethod(this.reservation.PaymentMethod),this.formFields.reservation_id=this.reservation.id,this.formFields.pickup_office_id=this.$store.getters["OfficeModule/officeByName"](this.reservation.PickupLocation).id,this.formFields.drop_office_id=this.$store.getters["OfficeModule/officeByName"](this.reservation.DropLocation).id,this.formFields.StartDateTime=this.reservation.StartDateTime,this.formFields.EndDateTime=this.reservation.EndDateTime,this.formFields.customers_id=+this.reservation.customer_id,this.formFields.PayReceiptNo="null"===this.reservation.PayReceiptNo?"":this.reservation.PayReceiptNo,this.formFields.reservation_drivers=JSON.parse(this.reservation.customer_drivers),this.formFields.PaymentMethod=this.reservation.PaymentMethod,this.formFields.PaymentState=this.reservation.PaymentState,this.formFields.TotalPriceByCurrency=this.reservation.TotalPriceByCurrency,this.extraServicesSelected=JSON.parse(this.reservation.ExtraServices),this.formFields.ExtraServices=JSON.parse(this.reservation.ExtraServices),this.formFields.DailyRentPrice=this.reservation.DailyRentPrice,this.formFields.TotalRentPrice=this.reservation.TotalRentPrice,this.formFields.TotalPrice=this.reservation.TotalPrice,this.formFields.RealDailyRentPrice=this.reservation.RealDailyRentPrice,this.formFields.CurrencySymbol=this.reservation.CurrencySymbol,this.formFields.CurrencyRate=this.reservation.CurrencyRate,this.formFields.OrgDailyRentPrice=this.reservation.DailyRentPrice,this.formFields.RentDays=this.reservation.RentDays,this.formFields.cars_id=this.reservation.cars_id,this.formFields.CurrencyType=this.reservation.CurrencyType,this.formFields.SelectedPriceTitle=this.reservation.SelectedPriceTitle,this.formFields.TotalExtraServicesPrice=this.reservation.TotalExtraServicesPrice,this.formFields.ReservationNo=this.reservation.ReservationNo,this.formFields.ReservationType=this.reservation.ReservationType,this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){this.$emit("ok"),this.onSubmitUpdatedReservation(),this.hide()},onCancelClick(){console.log("chancel"),this.hide()},onSubmitUpdatedReservation(){let e=new FormData;e.append("reservation_id",this.formFields.reservation_id),e.append("pickup_office_id",this.formFields.pickup_office_id),e.append("drop_office_id",this.formFields.drop_office_id),e.append("StartDateTime",this.formFields.StartDateTime),e.append("EndDateTime",this.formFields.EndDateTime),e.append("customers_id",this.formFields.customers_id),e.append("PayReceiptNo",this.formFields.PayReceiptNo),null!==this.formFields.reservation_drivers&&e.append("reservation_drivers",JSON.stringify(this.formFields.reservation_drivers)),e.append("PaymentMethod",this.formFields.PaymentMethod),e.append("ExtraServices",JSON.stringify(this.formFields.ExtraServices)),e.append("RealDailyRentPrice",this.formFields.RealDailyRentPrice),e.append("CurrencySymbol",this.formFields.CurrencySymbol),e.append("CurrencyRate",this.formFields.CurrencyRate),e.append("PaymentState",this.reservation.PaymentState),e.append("CurrencyType",this.formFields.CurrencyType),e.append("cars_id",this.formFields.cars_id),e.append("SelectedPriceTitle",this.formFields.SelectedPriceTitle),e.append("DailyRentPrice",this.formFields.DailyRentPrice),e.append("ReservationType",this.formFields.ReservationType),"Payed"===this.formFields.PaymentState&&e.append("ReservationStatus","Continues"),e.append("TotalPrice",this.formFields.newTotalPrice),e.append("RentDays",this.formFields.newRentDays),e.append("TotalRentPrice",this.formFields.newTotalRentPrice),e.append("TotalExtraServicesPrice",this.formFields.newTotalExtraServicesPrice),e.append("TotalPriceByCurrency",this.formFields.newTotalPriceByCurrency),e.append("newTotalPrice",this.formFields.TotalPrice),e.append("_method","PUT"),this.$store.dispatch("Reservations/updateReservation",e).then((e=>{e&&console.log(e)}))},async onSelectedCustomer(e){await this.$store.getters["CustomersModule/getRecord"](e)},onSelectedPaymentMethod(e){this.formFields.PayReceiptNo="",this.showPayReceiptNo="EftTransfer"===e||"CurrentSales"===e||"CreditCartOnTerminal"===e},addedNewCustomer(){this.customerOptions=JSON.parse(JSON.stringify(this.$store.getters["CustomersModule/getRecords"])).filter((e=>+e.customer_groups_id===+this.formFields.customer_groups_id)),this.newFormDialog=!1},onSelectedExtraServices(e){this.formFields.ExtendedDate=!0;let t=[],i=0;JSON.parse(JSON.stringify(e)).forEach((e=>{if("DependsOnHalfPrice"===e.CalculateType){const l=parseFloat(+this.formFields.DailyRentPrice/2);e.RealPrice=parseFloat(+this.formFields.RealDailyRentPrice/2),e.Price=parseFloat(this.formFields.RentDays*l).toFixed(2),e.Daily=l,i+=parseFloat(e.Price),t.push(e)}else{e.RealPrice=e.Price;const l=+e.Price;e.Price=parseFloat(l/this.formFields.CurrencyRate).toFixed(2),i+=parseFloat(e.Price),t.push(e)}})),this.formFields.ExtraServices=t,this.formFields.TotalExtraServicesPrice=i,this.setTotalPriceOrder()},setTotalPriceOrder(){this.formFields.TotalPrice=+this.formFields.TotalRentPrice+ +this.formFields.TotalExtraServicesPrice,this.formFields.TotalPriceByCurrency=parseInt(+this.formFields.TotalRentPrice*+this.formFields.CurrencyRate+ +this.formFields.TotalExtraServicesPrice*+this.formFields.CurrencyRate),this.formFields.newTotalPrice=parseFloat(this.formFields.TotalPrice-this.reservation.TotalPrice).toFixed(2),this.formFields.newRentDays=+this.formFields.RentDays-+this.reservation.RentDays,this.formFields.newTotalRentPrice=parseFloat(+this.formFields.newRentDays*+this.reservation.DailyRentPrice).toFixed(2),this.formFields.newTotalExtraServicesPrice=parseFloat(+this.formFields.TotalExtraServicesPrice-+this.reservation.TotalExtraServicesPrice).toFixed(2),this.formFields.newTotalPriceByCurrency=parseInt(+this.formFields.newTotalRentPrice*+this.formFields.CurrencyRate+ +this.formFields.newTotalExtraServicesPrice*+this.formFields.CurrencyRate).toFixed(2)}},mounted(){this.$store.dispatch("OfficeModule/get"),this.$store.dispatch("CustomersModule/get"),this.$store.dispatch("Cities/get"),this.$store.dispatch("DistrictModule/get"),this.$store.dispatch("CarPricesModule/get"),this.$store.dispatch("CarExtrasModule/get"),this.$store.dispatch("CustomerGroupsModule/get")},computed:{extraServicesRow(){return this.$store.getters["CarExtrasModule/activeExtras"]}}};var Yt=i(5269),$t=i(3944),Qt=i(5626),At=i(5990),Kt=i(429),Bt=i(4993),Lt=i(8186),Gt=i(3884),jt=i(5735);const Jt=(0,be.Z)(Ht,[["render",zt]]),Xt=Jt;Ue()(Ht,"components",{QDialog:Fe.Z,QCard:Re.Z,QBar:xe.Z,QSpace:De.Z,QBtn:Ce.Z,QTooltip:Se.Z,QCardSection:ke.Z,QForm:Yt.Z,QSelect:We.Z,QIcon:Ne.Z,QInput:Pe.Z,QPopupProxy:$t.Z,QDate:Qt.Z,QTime:At.Z,QExpansionItem:Kt.Z,QTable:Bt.Z,QTr:Lt.Z,QTd:Gt.Z,QCheckbox:jt.Z,QCardActions:Me.Z}),Ue()(Ht,"directives",{ClosePopup:Te.Z});const ei=[{name:"id",label:"ID",align:"center",sortable:!0,field:"id"},{name:"ReservationNo",align:"center",label:"Rezervasyon No",field:"ReservationNo"},{name:"Status",label:"Statüs",align:"center",field:"Status",sortable:!0},{name:"Pickup",label:"Aracı Alma Konumu",align:"center",field:"Pickup",sortable:!0},{name:"Return",label:"Aracı Bırakma Konumu",align:"center",field:"Return",sortable:!0},{name:"Car",label:"Araç",field:"Car",align:"center"},{name:"Customer",label:"Müşteri",field:"Customer",align:"center"},{name:"Amount",label:"Ödeme",field:"Amount",align:"left"},{name:"id",label:"",field:"id"}],ti=[{id:1,Info:"Detay",Pickup:"Alma Detayı",Return:"Bırakma Detayı",Car:"Araç Bilgileri",Customer:"Müşteri Bilgileri",Amount:"Ödeme Bilgileri"}],ii=(0,de.iH)({ReservationType:"",ReservationStatus:"",CarAttributes:"",CustomerGroupName:"",CustomerUnitName:""}),li={name:"ReservationsIndex",setup(){const e=(0,Vt.oR)(),t=(0,l.Fl)((()=>JSON.parse(JSON.stringify(e.getters["CustomerGroupsModule/getRecordActive"]))));console.log();const i=(0,de.iH)(t.value);return{customerGroupOptions:i,customerGroups:t,onFilterFields:ii,reservationManageDialog:(0,de.iH)(!1),invoiceManageDialog:(0,de.iH)(!1),updateInvoiceNumberDialog:(0,de.iH)(!1),updateReceiptNumberDialog:(0,de.iH)(!1),updateReservationNumberDialog:(0,de.iH)(!1),columns:ei,rows:ti,filter:(0,de.iH)(""),reservationFields:(0,de.iH)({ReservationStatus:"",PaymentState:"",id:null}),invoiceManageFields:(0,de.iH)({reservationId:""}),invoiceNumberEditFields:(0,de.iH)({id:"",InvoiceNo:""}),receiptNumberEditFields:(0,de.iH)({id:"",ReceiptCollectionNo:""}),reservationNumberEditFields:(0,de.iH)({id:"",ReservationNo:""}),onCustomerGroupFilter(e,l,a){l((()=>{const l=e.toLowerCase();i.value=t.value.filter((e=>e.Name.toLowerCase().indexOf(l)>-1))}))}}},components:{ShowLocation:oe.Z,Vehicle:se.Z,Customer:re.Z,Payment:ne.Z},computed:{currentReservations(){return this.$store.getters["Reservations/currentReservationsGetter"]},reservationStatus(){return this.$store.getters["MainModule/getReservationStatus"]},reservationPaymentStates(){return this.$store.getters["MainModule/getReservationTransactionStates"]}},mounted(){this.$store.dispatch("Reservations/getLastReservations"),this.$store.dispatch("CustomerGroupsModule/get")},methods:{onFilterTable(){let e=[],t={...this.onFilterFields};console.log("filter",t);let i=this.$store.getters["Reservations/currentReservationCopiesGetter"];e=i.filter((e=>{for(let i in t)if(t[i]&&e[i]!==t[i])return!1;return!0})),this.$store.commit("Reservations/setReservationsByFilter",e)},reservationUpdateHandleBtn(e,t,i){this.reservationFields.id=e,this.reservationManageDialog=!0,this.reservationFields.ReservationStatus=this.reservationStatus.find((e=>e.code===t)).code,this.reservationFields.PaymentState=this.reservationPaymentStates.find((e=>e.code===i)).code},reservationUpdatePayMethodHandleBtn(e){this.$q.dialog({component:Ve,componentProps:{reservation:e},parent:this})},async updateAllReservation(e){await this.$q.dialog({component:Xt,componentProps:{reservation:e},parent:this})},onsubmitReservationStatus(){let e=new FormData;e.append("ReservationStatus",this.reservationFields.ReservationStatus),e.append("PaymentState",this.reservationFields.PaymentState),e.append("id",this.reservationFields.id),e.append("_method","PUT"),this.$store.dispatch("Reservations/updateReservationStatus",e).then((e=>{!0===e&&(this.reservationManageDialog=!1,this.$router.push({name:"root"}))}))},reservationsStatus(e){return this.reservationStatus.find((t=>t.code===e)).title},reservationStatusColor(e){switch(e){case"WaitingForApproval":return{color:"secondary",icon:"query_builder"};case"Continues":return{color:"blue-9",icon:"av_timer"};case"Cancelled":return{color:"negative",icon:"highlight_off"};case"Completed":return{color:"blue-grey-8",icon:"verified_user"}}},invoiceManage(e){this.invoiceManageFields={},this.invoiceManageDialog=!0;let t=this.currentReservations.find((t=>+t.id===+e)),i=t.InvoiceNo.replace("*",0),l=t.ReceiptCollectionNo.replace("*",0);this.invoiceManageFields.reservationId=e,this.invoiceManageFields.InvoiceID=JSON.parse(t.InvoiceID),this.invoiceManageFields.ReceiptCollectionNo=JSON.parse(l),this.invoiceManageFields.ReceiptID=JSON.parse(t.ReceiptID),this.invoiceManageFields.InvoiceNo=JSON.parse(i),this.invoiceManageFields.ReservationNo=t.ReservationNo,this.invoiceManageFields.id=t.id,this.invoiceManageFields.ReservationIdOfArray=JSON.parse(t.ReservationIdOfArray),this.invoiceManageFields.ReservationNoOfArray=JSON.parse(t.ReservationNoOfArray),this.invoiceManageFields.ChildReservationIds=JSON.parse(t.ChildReservationIds),null!==t.ChildReservationIds&&this.invoiceManageFields.ChildReservationIds.push(+t.id)},editInvoiceNumber(e,t){this.updateInvoiceNumberDialog=!0,this.invoiceNumberEditFields.id=e,this.invoiceNumberEditFields.InvoiceNo=t},editReceiptNumber(e,t){this.updateReceiptNumberDialog=!0,this.receiptNumberEditFields.id=e,this.receiptNumberEditFields.ReceiptCollectionNo=t},editReservationNumber(e,t){this.reservationNumberEditFields.ReservationNo="",this.reservationNumberEditFields.id="",this.updateReservationNumberDialog=!0,this.reservationNumberEditFields.id=e,this.reservationNumberEditFields.ReservationNo=t},onUpdateInvoice(){let e=new FormData;for(const[t,i]of Object.entries(this.invoiceNumberEditFields))e.append(t,i);e.append("_method","PUT"),this.$store.dispatch("Reservations/invoiceNumberUpdate",e).then((e=>{!0===e&&(this.updateInvoiceNumberDialog=!1,this.invoiceManageDialog=!1)}))},onUpdateReceipt(){let e=new FormData;for(const[t,i]of Object.entries(this.receiptNumberEditFields))e.append(t,i);e.append("_method","PUT"),this.$store.dispatch("Reservations/receiptNumberUpdate",e).then((e=>{!0===e&&(this.updateReceiptNumberDialog=!1,this.invoiceManageDialog=!1)}))},onUpdateReservationNumber(){let e=new FormData;for(const[t,i]of Object.entries(this.reservationNumberEditFields))e.append(t,i);this.$store.dispatch("Reservations/reservationNumberUpdate",e).then((e=>{!0===e&&(this.updateReservationNumberDialog=!1,this.invoiceManageDialog=!1)}))},currentReservationFilter(e){const t=JSON.parse(JSON.stringify(this.filter)).toLowerCase();return e.filter((e=>e.CustomerNameSurname.toLowerCase().indexOf(t)>-1||e.DropLocation.toLowerCase().indexOf(t)>-1||e.ReservationNo.toLowerCase().indexOf(t)>-1||e.PickupLocation.toLowerCase().indexOf(t)>-1||e.ModelName.toLowerCase().indexOf(t)>-1||e.BrandName.toLowerCase().indexOf(t)>-1||e.LicencePlate.toLowerCase().indexOf(t)>-1))}}};var ai=i(7030),oi=i(5869),si=i(811),ri=i(7011),ni=i(3414),di=i(2035);const ui=(0,be.Z)(li,[["render",ae]]),ci=ui;Ue()(li,"components",{QTable:Bt.Z,QSelect:We.Z,QInput:Pe.Z,QIcon:Ne.Z,QBtn:Ce.Z,QTooltip:Se.Z,QTr:Lt.Z,QTd:Gt.Z,QChip:ai.Z,QDialog:Fe.Z,QCard:Re.Z,QBar:xe.Z,QSpace:De.Z,QCardSection:ke.Z,QForm:Yt.Z,QSeparator:oi.Z,QMenu:si.Z,QList:ri.Z,QItem:ni.Z,QItemSection:di.Z}),Ue()(li,"directives",{ClosePopup:Te.Z})}}]);