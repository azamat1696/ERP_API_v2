"use strict";(globalThis["webpackChunkrentacarpanel"]=globalThis["webpackChunkrentacarpanel"]||[]).push([[411],{5411:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ge});var i=l(3673),s=l(2323);const t={class:"q-pa-md"},r=(0,i._)("div",{class:"text-h4"},"Model Bazlı Fiyat Tanımlama",-1),d={class:"row"},n={class:"col-4 q-pa-xs q-mt-sm"},o=(0,i._)("div",{class:"text-subtitle2 text-bold"},"Bilgilendirme",-1),c=(0,i._)("div",{class:"text-weight-regular"}," 1. Aracın marka modeli seçilecektir. ",-1),m=(0,i._)("div",{class:"text-weight-regular"}," 2. Ana fiyatı girildikten sonra haftalık, aylık, yıllık fiyat indirimi kullanılabilir ",-1),u=(0,i._)("div",{class:"text-weight-regular"}," 3. Varsayılan fiyat indirim oranı 0. ",-1),b={class:"col-8"},y={class:"row"},h={class:"col-6 q-pa-sm"},p=(0,i._)("div",{class:"text-weight-regular q-mb-xs text-grey-8"},"Araç Markası",-1),g={class:"col-6 q-pa-sm"},P=(0,i._)("div",{class:"text-weight-regular q-mb-xs text-grey-8"},"Araç Modeli",-1),F={class:"row"},_={class:"col-12 q-pa-xs q-pt-none"},w=(0,i._)("div",{class:"text-weight-regular q-mb-xs text-grey-8"},"Günlük Araç Fiyatı ",-1),x={class:"col-4 q-pa-xs"},f={class:"row q-pa-sm bg-grey-1",style:{"border-radius":"5px"}},k=(0,i._)("div",{class:"text-subtitle2 q-mb-xs text-grey-10 text-bold"},"Haftalık Fiyat İndirim Oranı",-1),M={class:"col-7 q-pa-xs"},W={class:"col-5 q-pa-xs"},v={class:"col-4 q-pa-xs"},R={class:"row q-pa-sm bg-grey-1",style:{"border-radius":"5px"}},q=(0,i._)("div",{class:"text-subtitle2 q-mb-xs text-grey-10 text-bold"},"Aylık Fiyat İndirim Oranı",-1),C={class:"col-7 q-pa-xs"},V={class:"col-5 q-pa-xs"},D={class:"col-4 q-pa-xs"},S={class:"row q-pa-sm bg-grey-1",style:{"border-radius":"5px"}},Y=(0,i._)("div",{class:"text-subtitle2 q-mb-xs text-grey-10 text-bold"},"Yıllık Fiyat İndirim Oranı",-1),N={class:"col-7 q-pa-xs"},B={class:"col-5 q-pa-xs"},U={key:0,class:"text-right q-mt-sm"},Z={key:1,class:"text-right q-mt-sm"};function O(e,a,l,O,H,Q){const T=(0,i.up)("q-icon"),z=(0,i.up)("q-input"),A=(0,i.up)("q-btn"),J=(0,i.up)("q-td"),$=(0,i.up)("q-tr"),I=(0,i.up)("q-table"),L=(0,i.up)("q-space"),G=(0,i.up)("q-tooltip"),K=(0,i.up)("q-bar"),E=(0,i.up)("q-banner"),j=(0,i.up)("q-item-section"),X=(0,i.up)("q-item"),ee=(0,i.up)("q-select"),ae=(0,i.up)("q-range"),le=(0,i.up)("q-separator"),ie=(0,i.up)("q-form"),se=(0,i.up)("q-card-section"),te=(0,i.up)("q-card"),re=(0,i.up)("q-dialog"),de=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",t,[(0,i.Wm)(I,{title:"Araç Fiyat Tanımları ",rows:Q.getRecords,columns:O.baseSetting.carPricesColumns,"row-key":"id",filter:O.baseSetting.filterCarTypes},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(z,{outlined:"",dense:"",debounce:"300",color:"primary",modelValue:O.baseSetting.filterCarTypes,"onUpdate:modelValue":a[0]||(a[0]=e=>O.baseSetting.filterCarTypes=e),placeholder:"Ücrete Göre Arayınız..."},{append:(0,i.w5)((()=>[(0,i.Wm)(T,{name:"search"})])),_:1},8,["modelValue"]),(0,i.Wm)(A,{color:"primary",label:"Yeni Kayıt ",icon:"add",class:"q-mr-xs q-ml-xs q-pa-sm q-pr-md",onClick:Q.onAddNewPrice},null,8,["onClick"]),(0,i.Wm)(A,{color:"blue-grey-8",icon:"archive",label:"Excel Oluştur",class:"q-pa-sm",disable:""})])),body:(0,i.w5)((e=>[((0,i.wg)(),(0,i.j4)($,{props:e,key:e.row.index,class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(J),(0,i.Wm)(J,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.row.BrandName),1)])),_:2},1024),(0,i.Wm)(J,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.row.ModelName),1)])),_:2},1024),(0,i.Wm)(J,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.row.DailyPrice)+" TL ",1)])),_:2},1024),(0,i.Wm)(J,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.row.WeeklyPrice)+" TL ",1)])),_:2},1024),(0,i.Wm)(J,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.row.MonthlyPrice)+" TL ",1)])),_:2},1024),(0,i.Wm)(J,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.row.YearlyPrice)+" TL ",1)])),_:2},1024),(0,i.Wm)(J,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.row.created_at.split("T")[0]),1)])),_:2},1024),(0,i.Wm)(J,null,{default:(0,i.w5)((()=>[(0,i.Wm)(A,{flat:"",color:"blue-grey-9",onClick:a=>Q.onEdit(e.row.id),icon:"fas fa-edit",size:"sm",label:"Düzenle"},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns","filter"]),(0,i.Wm)(re,{modelValue:O.baseSetting.showFormDialog,"onUpdate:modelValue":a[10]||(a[10]=e=>O.baseSetting.showFormDialog=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(te,{style:{"min-width":"1000px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(K,{class:"q-pa-md bg-grey-4",style:{height:"50px"}},{default:(0,i.w5)((()=>[r,(0,i.Wm)(L),(0,i.wy)(((0,i.wg)(),(0,i.j4)(A,{dense:"",flat:"",icon:"close"},{default:(0,i.w5)((()=>[(0,i.Wm)(G,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Kapat")])),_:1})])),_:1})),[[de]])])),_:1}),(0,i.Wm)(se,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ie,{onSubmit:Q.onSubmit,onReset:Q.onReset,class:""},{default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i._)("div",n,[(0,i.Wm)(E,{dense:"",class:"bg-grey-1 q-pa-sm"},{avatar:(0,i.w5)((()=>[(0,i.Wm)(T,{name:"priority_high",color:"primary"})])),default:(0,i.w5)((()=>[o,c,m,u])),_:1})]),(0,i._)("div",b,[(0,i._)("div",y,[(0,i._)("div",h,[p,(0,i.Wm)(ee,{modelValue:O.baseFields.brand_id,"onUpdate:modelValue":[a[1]||(a[1]=e=>O.baseFields.brand_id=e),Q.onChangeCarBrands],options:O.optionBrands,outlined:"",dense:"","option-label":e=>e.BrandName,"option-value":e=>e.id,onFilter:O.onFilterCarBrands,"use-input":"","lazy-rules":!0,rules:[e=>e&&e.BrandName.length>0||"Zorunlu alan"],"hide-bottom-space":"",disable:""!==O.baseFields.id},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(X,null,{default:(0,i.w5)((()=>[(0,i.Wm)(j,{class:"text-grey"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Kayıt Bulunamadı ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","option-label","option-value","onFilter","onUpdate:modelValue","rules","disable"])]),(0,i._)("div",g,[P,(0,i.Wm)(ee,{modelValue:O.baseFields.model_id,"onUpdate:modelValue":a[2]||(a[2]=e=>O.baseFields.model_id=e),options:O.carModelOptions,outlined:"",dense:"","option-label":e=>e.ModelName,"option-value":e=>e.id,"use-input":"","lazy-rules":!0,rules:[e=>e&&e.ModelName.length>0||"Zorunlu alan"],"hide-bottom-space":"",disable:""!==O.baseFields.id},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(X,null,{default:(0,i.w5)((()=>[(0,i.Wm)(j,{class:"text-grey"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Kayıt Bulunamadı ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","option-label","option-value","rules","disable"])])]),(0,i._)("div",F,[(0,i._)("div",_,[w,(0,i.Wm)(z,{outlined:"",dense:"",modelValue:O.baseFields.DailyPrice,"onUpdate:modelValue":[a[3]||(a[3]=e=>O.baseFields.DailyPrice=e),Q.onChangeMainPrice],"lazy-rules":"",rules:[e=>e&&e.length>0||"Zorunlu alan"],mask:"#.##","fill-mask":"0","reverse-fill-mask":""},null,8,["modelValue","rules","onUpdate:modelValue"])])])])]),(0,i._)("div",{class:(0,s.C_)(["row",[this.baseFields.DailyPrice>1&&this.baseFields.model_id?"":"disabled"]])},[(0,i._)("div",x,[(0,i._)("div",f,[k,(0,i._)("div",M,[(0,i.Wm)(ae,{modelValue:O.baseFields.WeeklyPriceRange,"onUpdate:modelValue":[a[4]||(a[4]=e=>O.baseFields.WeeklyPriceRange=e),Q.onChangeWeeklyPriceRange],min:0,max:15,"left-label-value":O.baseFields.WeeklyPriceRange.min+"%","right-label-value":O.baseFields.WeeklyPriceRange.max+"%",markers:"","switch-label-side":"",label:""},null,8,["modelValue","left-label-value","right-label-value","onUpdate:modelValue"])]),(0,i._)("div",W,[(0,i.Wm)(z,{type:"text",dense:"",outlined:"",readonly:"",modelValue:O.baseFields.WeeklyPrice,"onUpdate:modelValue":a[5]||(a[5]=e=>O.baseFields.WeeklyPrice=e)},null,8,["modelValue"])])])]),(0,i._)("div",v,[(0,i._)("div",R,[q,(0,i._)("div",C,[(0,i.Wm)(ae,{modelValue:O.baseFields.MonthlyPriceRange,"onUpdate:modelValue":[a[6]||(a[6]=e=>O.baseFields.MonthlyPriceRange=e),Q.onChangeMonthlyPriceRange],min:0,max:15,"left-label-value":O.baseFields.MonthlyPriceRange.min+"%","right-label-value":O.baseFields.MonthlyPriceRange.max+"%",markers:"","switch-label-side":"",label:""},null,8,["modelValue","left-label-value","right-label-value","onUpdate:modelValue"])]),(0,i._)("div",V,[(0,i.Wm)(z,{type:"text",dense:"",outlined:"",readonly:"",modelValue:O.baseFields.MonthlyPrice,"onUpdate:modelValue":a[7]||(a[7]=e=>O.baseFields.MonthlyPrice=e)},null,8,["modelValue"])])])]),(0,i._)("div",D,[(0,i._)("div",S,[Y,(0,i._)("div",N,[(0,i.Wm)(ae,{modelValue:O.baseFields.YearlyPriceRange,"onUpdate:modelValue":[a[8]||(a[8]=e=>O.baseFields.YearlyPriceRange=e),Q.onChangeYearlyPriceRange],min:0,max:15,"left-label-value":O.baseFields.YearlyPriceRange.min+"%","right-label-value":O.baseFields.YearlyPriceRange.max+"%",markers:"","switch-label-side":"",label:""},null,8,["modelValue","left-label-value","right-label-value","onUpdate:modelValue"])]),(0,i._)("div",B,[(0,i.Wm)(z,{type:"text",dense:"",outlined:"",readonly:"",modelValue:O.baseFields.YearlyPrice,"onUpdate:modelValue":a[9]||(a[9]=e=>O.baseFields.YearlyPrice=e)},null,8,["modelValue"])])])])],2),(0,i.Wm)(le,{class:"q-mt-sm"}),O.baseFields.id?((0,i.wg)(),(0,i.iD)("div",U,[(0,i.Wm)(A,{label:"Güncelle",type:"button",color:"blue-8",flat:"","icon-right":"save",onClick:Q.onUpdate},null,8,["onClick"])])):((0,i.wg)(),(0,i.iD)("div",Z,[(0,i.Wm)(A,{label:"Sıfırla",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),(0,i.Wm)(A,{label:"Kaydet",type:"submit",color:"positive",flat:"","icon-right":"save"})]))])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var H=l(1959);const Q=[{name:"model_id",align:"center",label:"",field:"model_id"},{name:"BrandName",align:"center",label:"Marka Adı",field:"BrandName",sortable:!0},{name:"ModelName",align:"center",label:"Model Adı",field:"ModelName",sortable:!1},{name:"DailyPrice",align:"center",label:"Günlük Ücreti",field:"DailyPrice",sortable:!0},{name:"WeeklyPrice",align:"center",label:"Haftalık Ücreti",field:"WeeklyPrice",sortable:!0},{name:"MonthlyPrice",align:"center",label:"Aylık Ücreti",field:"MonthlyPrice",sortable:!0},{name:"YearlyPrice",align:"center",label:"Yıllık Ücreti",field:"YearlyPrice",sortable:!0},{name:"created_at",align:"center",label:"Tarih",field:"created_at"},{name:"id",align:"center",label:"",field:"id"}],T=Q;var z=l(4147),A=l(4434),J=l(741);const $={name:"CarTypes",setup(){const e=(0,J.oR)(),a=(0,i.Fl)((()=>JSON.parse(JSON.stringify(e.getters["CarBrandsModule/getCarBrandsState"])))),l=(0,H.iH)(a.value),s=(0,i.Fl)((()=>JSON.parse(JSON.stringify(e.getters["CarModelsModule/carModels"]))));let t=(0,H.iH)(s.value);return{baseSetting:(0,H.iH)({showFormDialog:(0,H.iH)(!1),carPricesColumns:T,dateFormat:z.v,filterCarTypes:(0,H.iH)("")}),baseFields:(0,H.iH)({brand_id:(0,H.iH)(null),model_id:(0,H.iH)(null),id:"",WeeklyPriceRange:(0,H.iH)({min:0,max:0}),MonthlyPriceRange:(0,H.iH)({min:0,max:0}),YearlyPriceRange:(0,H.iH)({min:0,max:0}),DailyPrice:(0,H.iH)(0),WeeklyPrice:(0,H.iH)(0),MonthlyPrice:(0,H.iH)(0),YearlyPrice:(0,H.iH)(0)}),optionBrands:l,carModelOptions:t,carModels:s,brands:a,onFilterCarBrands(e,i,s){i((()=>{const i=e.toLowerCase();l.value=a.value.filter((e=>e.BrandName.toLowerCase().indexOf(i)>-1))}))}}},methods:{onChangeCarBrands(e){this.carModelOptions.splice(0,this.carModelOptions.length),this.baseFields.model_id="",this.carModelOptions=this.carModels.filter((a=>+a.brand_id===+e.id))},onAddNewPrice(){this.onReset(),this.baseSetting.showFormDialog=!0},onSubmit(){let e=new FormData;e.append("model_id",this.baseFields.model_id.id),e.append("DailyPrice",this.baseFields.DailyPrice),e.append("WeeklyPrice",this.baseFields.WeeklyPrice),e.append("MonthlyPrice",this.baseFields.MonthlyPrice),e.append("YearlyPrice",this.baseFields.YearlyPrice),e.append("WeeklyPriceRange",JSON.stringify(this.baseFields.WeeklyPriceRange)),e.append("MonthlyPriceRange",JSON.stringify(this.baseFields.MonthlyPriceRange)),e.append("YearlyPriceRange",JSON.stringify(this.baseFields.YearlyPriceRange)),this.$store.dispatch("CarPricesModule/create",e).then((()=>{this.onReset(),this.baseSetting.showFormDialog=!1}))},onReset(){this.baseFields.DailyPrice=0,this.baseFields.WeeklyPrice=0,this.baseFields.MonthlyPrice=0,this.baseFields.YearlyPrice=0,this.baseFields.WeeklyPriceRange.max=0,this.baseFields.MonthlyPriceRange.max=0,this.baseFields.YearlyPriceRange.max=0,this.baseFields.brand_id="",this.baseFields.model_id="",this.baseFields.id=""},onEdit(e){const a=this.getRecords.find((a=>parseInt(a.id)===parseInt(e)));this.baseFields.id=a.id,this.baseFields.DailyPrice=a.DailyPrice,this.baseFields.WeeklyPrice=a.WeeklyPrice,this.baseFields.MonthlyPrice=a.MonthlyPrice,this.baseFields.YearlyPrice=a.YearlyPrice,this.baseFields.WeeklyPriceRange=JSON.parse(a.WeeklyPriceRange),this.baseFields.MonthlyPriceRange=JSON.parse(a.MonthlyPriceRange),this.baseFields.YearlyPriceRange=JSON.parse(a.YearlyPriceRange),this.baseFields.model_id=this.selectedCarModel(a.model_id),this.baseFields.brand_id=this.selectedCarBrand(this.baseFields.model_id.brand_id),this.carModelOptions=this.$store.getters["CarModelsModule/carModelByBrandId"](this.baseFields.model_id.brand_id),this.baseSetting.showFormDialog=!0},onUpdate(){let e=new FormData;e.append("model_id",this.baseFields.model_id.id),e.append("DailyPrice",this.baseFields.DailyPrice),e.append("WeeklyPrice",this.baseFields.WeeklyPrice),e.append("MonthlyPrice",this.baseFields.MonthlyPrice),e.append("YearlyPrice",this.baseFields.YearlyPrice),e.append("WeeklyPriceRange",JSON.stringify(this.baseFields.WeeklyPriceRange)),e.append("MonthlyPriceRange",JSON.stringify(this.baseFields.MonthlyPriceRange)),e.append("YearlyPriceRange",JSON.stringify(this.baseFields.YearlyPriceRange)),e.append("id",this.baseFields.id),e.append("_method","PUT"),this.$store.dispatch("CarPricesModule/update",e).then((()=>{this.baseSetting.showFormDialog=!1,this.onReset()}))},onChangeWeeklyPriceRange(e){if(0===this.baseFields.DailyPrice)return this.negativeNotify(),!1;this.baseFields.WeeklyPriceRange.min=(0,H.iH)(0),this.baseFields.WeeklyPrice=Math.round(this.baseFields.DailyPrice-this.baseFields.DailyPrice*e.max/100).toFixed(2)},onChangeMonthlyPriceRange(e){if(0===this.baseFields.DailyPrice)return this.negativeNotify(),!1;this.baseFields.MonthlyPriceRange.min=(0,H.iH)(0),this.baseFields.MonthlyPrice=Math.round(this.baseFields.DailyPrice-this.baseFields.DailyPrice*e.max/100).toFixed(2)},onChangeYearlyPriceRange(e){if(0===this.baseFields.DailyPrice)return this.negativeNotify(),!1;this.baseFields.YearlyPriceRange.min=(0,H.iH)(0),this.baseFields.YearlyPrice=Math.round(this.baseFields.DailyPrice-this.baseFields.DailyPrice*e.max/100).toFixed(2)},onChangeMainPrice(e){this.baseFields.id?(this.baseFields.WeeklyPriceRange.max=(0,H.iH)(0),this.baseFields.MonthlyPriceRange.max=(0,H.iH)(0),this.baseFields.YearlyPriceRange.max=(0,H.iH)(0),this.baseFields.WeeklyPrice=e,this.baseFields.MonthlyPrice=e,this.baseFields.YearlyPrice=e):(this.baseFields.WeeklyPrice=e,this.baseFields.MonthlyPrice=e,this.baseFields.YearlyPrice=e)},negativeNotify(){A.Z.create({position:"center",type:"negative",timeout:600,message:"Araç Ücreti Giriniz..!"})},selectedCarBrand(e){return{...this.$store.getters["CarBrandsModule/getCarBrandFromState"](e)}},selectedCarModel(e){return{...this.$store.getters["CarModelsModule/carModel"](e)}}},mounted(){this.$store.dispatch("CarPricesModule/get"),this.$store.dispatch("CarBrandsModule/getCarBrands"),this.$store.dispatch("CarModelsModule/getCarModels")},computed:{getRecords(){return this.$store.getters["CarPricesModule/getRecords"]}}};var I=l(4260),L=l(4993),G=l(4689),K=l(4554),E=l(2165),j=l(8186),X=l(3884),ee=l(4390),ae=l(151),le=l(846),ie=l(2025),se=l(8870),te=l(5589),re=l(5269),de=l(5607),ne=l(3314),oe=l(3414),ce=l(2035),me=l(8151),ue=l(5869),be=l(677),ye=l(7518),he=l.n(ye);const pe=(0,I.Z)($,[["render",O]]),ge=pe;he()($,"components",{QTable:L.Z,QInput:G.Z,QIcon:K.Z,QBtn:E.Z,QTr:j.Z,QTd:X.Z,QDialog:ee.Z,QCard:ae.Z,QBar:le.Z,QSpace:ie.Z,QTooltip:se.Z,QCardSection:te.Z,QForm:re.Z,QBanner:de.Z,QSelect:ne.Z,QItem:oe.Z,QItemSection:ce.Z,QRange:me.Z,QSeparator:ue.Z}),he()($,"directives",{ClosePopup:be.Z})}}]);