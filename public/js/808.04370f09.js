"use strict";(globalThis["webpackChunkrentacarpanel"]=globalThis["webpackChunkrentacarpanel"]||[]).push([[808],{808:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var l=i(3673),a=i(2323);const o=e=>((0,l.dD)("data-v-228f8331"),e=e(),(0,l.Cn)(),e),s={class:"q-pa-md"},r=o((()=>(0,l._)("i",{class:"fas fa-edit"},null,-1))),n=o((()=>(0,l._)("i",{class:"fas fa-trash-alt"},null,-1))),d=o((()=>(0,l._)("div",{class:"text-h4"},"Yeni Şehir Oluştur",-1))),u={class:"row"},c={class:"col-4 q-pa-xs"},m=o((()=>(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Ülke Seçiniz ",-1))),p={class:"col-4 q-pa-xs"},g=o((()=>(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Şehir Adı ",-1))),h={class:"col-4 q-pa-xs"},y=o((()=>(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Şehir Statusu",-1))),f={class:"row q-mt-xs"},w={class:"col-12"},b=o((()=>(0,l._)("div",{class:"text-subtitle2 text-grey-8"}," Harita Konumu ",-1))),_={class:"row"},C={class:"col-12"},S={class:"row"},v={key:0,class:"col-12 text-right"},F={key:1,class:"col-12 text-right"};function k(e,t,i,o,k,q){const x=(0,l.up)("q-icon"),W=(0,l.up)("q-input"),N=(0,l.up)("q-btn"),Z=(0,l.up)("q-td"),D=(0,l.up)("q-chip"),Q=(0,l.up)("q-tr"),H=(0,l.up)("q-table"),M=(0,l.up)("q-space"),P=(0,l.up)("q-tooltip"),U=(0,l.up)("q-bar"),V=(0,l.up)("q-select"),z=(0,l.up)("GMapAutocomplete"),T=(0,l.up)("q-toggle"),$=(0,l.up)("GMapMarker"),B=(0,l.up)("GMapCluster"),I=(0,l.up)("GMapMap"),K=(0,l.up)("q-form"),O=(0,l.up)("q-card-section"),E=(0,l.up)("q-card"),R=(0,l.up)("q-dialog"),A=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(H,{title:"Ofis Noktaları",rows:q.citiesRows,columns:o.baseSetting.stateColumns,"row-key":"id",filter:o.baseSetting.filter},{"top-right":(0,l.w5)((()=>[(0,l.Wm)(W,{outlined:"",dense:"",debounce:"300",color:"primary",modelValue:o.baseSetting.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>o.baseSetting.filter=e),placeholder:"Şehir Arayınız..."},{append:(0,l.w5)((()=>[(0,l.Wm)(x,{name:"search"})])),_:1},8,["modelValue"]),(0,l.Wm)(N,{color:"primary",label:"Yeni Kayıt ",icon:"add",class:"q-mr-xs q-ml-xs q-pa-sm q-pr-md",onClick:t[1]||(t[1]=e=>o.baseSetting.showFormDialog=!0),ref:"showFormDialog",id:"showFormDialog"},null,512),(0,l.Wm)(N,{color:"blue-grey-8",icon:"archive",label:"Excel Oluştur",class:"q-pa-sm",disable:""})])),body:(0,l.w5)((e=>[((0,l.wg)(),(0,l.j4)(Q,{props:e,key:e.row.index,class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)({...this.$store.getters["CountryModule/countryById"](e.row.country_id)}.CountryName),1)])),_:2},1024),(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.row.CityName),1)])),_:2},1024),(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{square:"",color:1===+e.row.Status?"positive":"negative","text-color":"white",icon:1===+e.row.Status?"done":"clear",size:"13px"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(1===+e.row.Status?"Açık":"Kapalı"),1)])),_:2},1032,["color","icon"])])),_:2},1024),(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(o.baseSetting.dateFormat(e.row.created_at)),1)])),_:2},1024),(0,l.Wm)(Z,{class:"text-right"},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{flat:"",round:"",color:"blue-grey-9",onClick:t=>q.onEdit(e.row.id)},{default:(0,l.w5)((()=>[r])),_:2},1032,["onClick"]),(0,l.Wm)(N,{flat:"",round:"",color:"primary",disable:""},{default:(0,l.w5)((()=>[n])),_:1})])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns","filter"]),(0,l.Wm)(R,{modelValue:o.baseSetting.showFormDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>o.baseSetting.showFormDialog=e),persistent:"",style:{"z-index":"999!important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{style:{"min-width":"700px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"q-pa-md",style:{height:"50px"}},{default:(0,l.w5)((()=>[d,(0,l.Wm)(M),(0,l.wy)(((0,l.wg)(),(0,l.j4)(N,{dense:"",flat:"",icon:"close"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Kapat")])),_:1})])),_:1})),[[A]])])),_:1}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(K,{onSubmit:q.onSubmit,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l._)("div",c,[m,(0,l.Wm)(V,{modelValue:o.formFields.country_id,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formFields.country_id=e),options:q.countries,"option-label":e=>e.CountryName,"option-value":e=>e.id,"lazy-rules":!0,rules:[e=>e&&e.CountryName.length>0||"Zorunlu alan"],outlined:"",dense:"","hide-bottom-space":""},null,8,["modelValue","options","option-label","option-value","rules"])]),(0,l._)("div",p,[g,(0,l.Wm)(z,{placeholder:"Konum Arayınız",onPlace_changed:q.setPlace,class:"autoCompleteInput"},null,8,["onPlace_changed"])]),(0,l._)("div",h,[y,(0,l.Wm)(T,{modelValue:o.formFields.Status,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formFields.Status=e),label:"Şehir Statusu",color:"green"},null,8,["modelValue"])])]),(0,l._)("div",f,[(0,l._)("div",w,[b,(0,l.Wm)(W,{outlined:"",dense:"","model-value":o.center.lat.toFixed(4)+" - "+o.center.lng.toFixed(4),"hide-bottom-space":"",readonly:"",for:"latLng"},null,8,["model-value"])])]),(0,l._)("div",_,[(0,l._)("div",C,[(0,l.Wm)(I,{center:o.center,zoom:9,"map-type-id":"terrain",style:{width:"500px",height:"300px!important"},disableDefaultUI:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.markers,((e,t)=>((0,l.wg)(),(0,l.j4)($,{key:t,position:e.position,clickable:!1,draggable:!1,onClick:t=>o.center=e.position},null,8,["position","onClick"])))),128))])),_:1})])),_:1},8,["center"])])]),(0,l._)("div",S,[o.formFields.id?((0,l.wg)(),(0,l.iD)("div",F,[(0,l.Wm)(N,{label:"Güncelle",type:"button",color:"blue-grey-8","icon-right":"restart_alt",onClick:q.onUpdate},null,8,["onClick"])])):((0,l.wg)(),(0,l.iD)("div",v,[(0,l.Wm)(N,{label:"Sıfırla",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),(0,l.Wm)(N,{label:"Kaydet",type:"submit",color:"blue-grey-8","icon-right":"save"})]))])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const q=[{name:"country_id",align:"center",label:"Ülke",field:"country_id",sortable:!0},{name:"CityName",align:"center",label:"Şehir",field:"CityName",sortable:!0},{name:"Status",align:"center",label:"Statusu",field:"Status",sortable:!0},{name:"created_at",align:"center",label:"Tarih",field:"created_at"},{name:"id",align:"center",label:"",field:"id"}],x=q;var W=i(1959),N=i(4147);const Z={name:"States",setup(){return{center:(0,W.iH)({lat:35.1937,lng:33.357}),markers:(0,W.iH)([{position:{lat:35.1937,lng:33.357}}]),map:(0,W.iH)(null),baseSetting:(0,W.iH)({dateFormat:N.v,showFormDialog:(0,W.iH)(!1),stateColumns:x,filter:(0,W.iH)("")}),formFields:(0,W.iH)({Status:(0,W.iH)(!0),CityName:(0,W.iH)(""),Positions:(0,W.iH)(""),country_id:(0,W.iH)(""),id:(0,W.iH)("")})}},mounted(){this.$store.dispatch("CountryModule/getCountries"),this.$store.dispatch("Cities/get")},computed:{countries(){return this.$store.getters["CountryModule/countries"]},citiesRows(){return this.$store.getters["Cities/cities"]}},methods:{onSubmit(){let e=new FormData;e.append("CityName",document.getElementsByClassName("pac-target-input")[0].value),e.append("country_id",this.formFields.country_id.id),e.append("Status",this.formFields.Status),e.append("Positions",JSON.stringify(this.center)),this.$store.dispatch("Cities/create",e).then((e=>{this.onReset(),this.baseSetting.showFormDialog=!1}))},setPlace(e){this.setMarker(e.geometry.location.lat(),e.geometry.location.lng())},setMarker(e,t){this.center={lat:e,lng:t},this.markers=[{position:{lat:e,lng:t}}]},onReset(){this.formFields.CityName="",this.formFields.Positions="",this.formFields.country_id=""},onEdit(e){const t=this.citiesRows.find((t=>+t.id===+e));this.formFields.Status=1===+t.Status,this.formFields.id=t.id,this.formFields.Positions=JSON.parse(t.Positions),this.formFields.CityName=t.CityName,this.formFields.country_id=this.$store.getters["CountryModule/countryById"](+t.country_id);const i=JSON.parse(t.Positions);this.setMarker(i.lat,i.lng),this.markers=[{position:i}],this.baseSetting.showFormDialog=!0,setTimeout((()=>{document.getElementsByClassName("pac-target-input")[0].value=t.CityName}),500)},onUpdate(){let e=new FormData;e.append("CityName",document.getElementsByClassName("pac-target-input")[0].value),e.append("country_id",this.formFields.country_id.id),e.append("Status",this.formFields.Status),e.append("id",this.formFields.id),e.append("Positions",JSON.stringify(this.center)),e.append("_method","PUT"),this.$store.dispatch("Cities/update",e).then((e=>{this.onReset(),this.baseSetting.showFormDialog=!1}))}}};var D=i(4260),Q=i(4993),H=i(4689),M=i(4554),P=i(2165),U=i(8186),V=i(3884),z=i(7030),T=i(4390),$=i(151),B=i(846),I=i(2025),K=i(8870),O=i(5589),E=i(5269),R=i(3314),A=i(8886),G=i(677),J=i(7518),j=i.n(J);const Y=(0,D.Z)(Z,[["render",k],["__scopeId","data-v-228f8331"]]),L=Y;j()(Z,"components",{QTable:Q.Z,QInput:H.Z,QIcon:M.Z,QBtn:P.Z,QTr:U.Z,QTd:V.Z,QChip:z.Z,QDialog:T.Z,QCard:$.Z,QBar:B.Z,QSpace:I.Z,QTooltip:K.Z,QCardSection:O.Z,QForm:E.Z,QSelect:R.Z,QToggle:A.Z}),j()(Z,"directives",{ClosePopup:G.Z})}}]);